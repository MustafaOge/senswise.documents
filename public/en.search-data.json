{"/about/":{"data":{"":"This is the about page."},"title":"About"},"/docs/":{"data":{"":"","hello-world#Hello, World!":"This is a demo of the theme’s documentation layout.\nHello, World! main.gopackage main import \"fmt\" func main() { fmt.Println(\"Hello, World!\") } "},"title":"Documentation"},"/docs/first-page/":{"data":{"":"A simple demo page."},"title":"Demo Page"},"/docs/folder/":{"data":{"":"this page 0"},"title":"Folder"},"/docs/folder/leaf/":{"data":{"":"This page is under a folder."},"title":"Leaf Page"},"/docs/folder/page1/":{"data":{"":"Change detected, rebuilding site (#4). 2024-08-20 10:56:47.708 +0300 Source changed /docs/folder/_index.md Web Server is available at //localhost:1313/ (bind address 127.0.0.1) Total in 101 ms"},"title":"Folder"},"/docs/tenant-creation/":{"data":{"":"Aşağıdaki Adımları Takip Ederek Yeni Bir Tenant Oluşturabilirsiniz. Adımlarda kullanılacak dosyalar ve video rehberine buradan ulaşabilirsiniz."},"title":"Tenant Oluşturma Rehberi"},"/docs/tenant-creation/assign-admin/":{"data":{"":"","#":"Yeni oluşturulan tenant için bir admin kullanıcı atamak gerekmektedir. Bunu yapmak için aşağıdaki adımları izleyebilirsiniz:\n2.1 Kullanıcı Oluşturma: İlgili sunucunun kayıt olma adresinden (örneğin, https://dev.senswise.co/sign-up) bir FREE_USER hesabı oluşturun. Bu kullanıcının daha sonra admin olarak atanabilmesi için gerekli işlemleri yapacağız. 2.2 Kullanıcı Bilgilerinin Güncellenmesi: Örneğin, admin olacak kullanıcının e-posta adresi new_tenant@senswise.co olsun.\nSENSWISE veritabanındaki USER şemasının USER tablosunda bu kullanıcıyı bulmak için aşağıdaki sorguyu kullanabilirsiniz:\nSELECT * FROM \"USER\".\"USER\" u WHERE u.\"EMAIL\" LIKE '%new_tenant@senswise.co%' Bulduğunuz kullanıcının ID numarasını alın. Örneğin, ID numarası 12345 olsun.\nEğer bu kullanıcının aynı zamanda bir lider olması gerekiyorsa, IS_MANAGER alanını da true olarak güncelleyin.\n2.3 Kullanıcı Yetkilerinin Tanımlanması: Kullanıcının ID değerini USER şemasındaki USER_ROLE tablosunda sorgulayarak, ilgili kaydın ROLE_ID değerini 4 (ENDUSER) yerine 2 (ADMIN) olarak güncelleyiniz.\nAdmin kullanıcısının durumunu güncellemek için aşağıdaki sorguyu kullanın:\nUPDATE \"USER\".\"USER_ROLE\" SET \"ROLE_ID\"=2 WHERE \"USER_ID\"=12345; Burada ROLE_ID ile yetkiler belirlenir:\n1 - SUPERADMIN 2 - ADMIN 3 - MANAGER 4 - ENDUSER Yeni tenant için sadece 2 (ADMIN) veya hem 2 hem de 3 (MANAGER) atanabilir. SUPERADMIN yetkisi sadece SENSWISE çalışanları için kullanılmalıdır, müşteriler bu yetkiye sahip olmamalıdır.\n2.4 Tenant Ataması ve Kullanıcı Tipinin Güncellenmesi: Admin kullanıcısını yeni tenant’a atamak ve kullanıcı tipini güncellemek için aşağıdaki sorguyu kullanabilirsiniz:\nUPDATE \"USER\".\"USER_TENANT\" SET \"TENANT_CODE\"='NEW_TENANT', \"USER_TYPE_ID\"=4 WHERE \"USER_ID\"=12345; Burada USER_TYPE_ID 4 olarak ayarlandığı için kullanıcı PRO üye olacaktır.\n2.5 Sonuç: Yeni tenant için bir admin kullanıcısı oluşturulmuş oldu. Bu kullanıcı artık sisteme admin olarak giriş yapabilir, ancak diğer veriler eklenene kadar sınırlı yetkilerle çalışacaktır. 😊 "},"title":"2 - Yeni Tenant'a Admin Atanması"},"/docs/tenant-creation/data-migration/":{"data":{"":"","#":"Bu işlemler, iki farklı proje kullanılarak gerçekleştirilir:\n3.1 için SenseCorSeeds projesi kullanılır. 3.2 için SenswiseNotificationUI projesinin newmdsystem branch’i kullanılır. Bu projeleri çalıştırabilmek için öncelikle bun paket yöneticisini kurmanız gerekmektedir. Bun‘u yüklemek için aşağıdaki bağlantıyı kullanabilirsiniz:\nhttps://bun.sh/docs/installation\nAyrıca, Visual Studio Code için “Bun for Visual Studio Code” eklentisini de ekleyerek daha kolay bir geliştirme ortamı sağlayabilirsiniz.\n3.1 Yeni Tenant için Parametrelerin Eklenmesi Proje açıldıktan sonra, .env.sample dosyasını kopyalayarak .env dosyası oluşturun.\nHangi ortama bağlanacaksanız, o ortamın veri tabanı bağlantısını .env dosyasında etkinleştirin (yorum satırından çıkarın).\nseeds klasörü altında, parameter-group içinde bulunan data.ts dosyasını açın.\nPREDEFINED_SCALE objesi içindeki output alanlarını gözden geçirin:\nHer bir TENANT_CODE alanına uygun tenant kodunu girin.\nvalue değerlerinin 0 olduğundan emin olun.\nÖrnek olarak, aşağıdaki kodu kullanabilirsiniz:\noutput = overwriteWith(output, \"TENANT_CODE\", \"Scale2\", \"0\"); Bu işlem tenant kodları ve değerlerinin doğru bir şekilde ayarlandığını sağlar.\nNot: Bu işlem bazen cache nedeniyle Scale durumunu 1 olarak bırakabilir, bu yüzden anket şablonları yüklenmeyebilir. Eğer böyle bir durumla karşılaşırsanız, cache’in temizlenmesini beklemeniz gerekebilir.\nTerminalde, projedeki bağımlılıkları yüklemek için bun install komutunu çalıştırın.\nYeni tenant parametrelerini veritabanına yüklemek için bun run index.ts komutunu çalıştırın.\nYüklenen verileri CORE.PARAMETER tablosunda görebilirsiniz. Uyarı: Bu işlem dev ve demo ortamlarında genellikle sorunsuz çalışırken, prod ortamında sorun çıkarsa birkaç kez denemeniz gerekebilir.\n3.2 Yeni Tenant için E-posta Template Yüklenmesi SenswiseNotificationUI projesinin newmdsystem branch’ine geçin.\nProje dosyalarında bulunan NotificationDefinitions.xlsx dosyasını açın ve şu adımları izleyin:\nYeni eklediğiniz tenant kodunu TENANT sütununun altına girin. Excel dosyasındaki herhangi bir tabloyu seçin ve sağ tıklayarak “Taşı ve Kopyala” seçeneğiyle bir kopyasını oluşturun. Oluşturduğunuz kopyanın ismini yeni tenant ismiyle değiştirin. .env dosyasında yükleme yapacağınız veritabanı bağlantı ayarlarını yapılandırın. Bağlantı ayarlarında NOTIFICATION?schema=DEF olmasına dikkat edin.\nTerminalde, eksik paketleri indirmek için bun install komutunu çalıştırın.\nSon olarak, NotificationDefinitions.xlsx dosyasındaki değişiklikleri veritabanına yüklemek için bun run .\\scripts\\executeExcel.ts komutunu çalıştırın.\nYapılan değişiklikleri GitHub deposuna commit ile gönderin. Çünkü sonraki çalıştırılmalarda yeni eklenen tenant bilgilerinin excel dosyasında bulunması gerekir."},"title":"3 - Tenant Verilerinin Yeni Tenant'a Eklenmesi"},"/docs/tenant-creation/template-setup/":{"data":{"":"","#":"Bu bölümde, Tenant ve anket (survey) bilgilerini içeren Excel Template bilgilerini sisteme yükleyeceğiz. İşlemler, ortamınıza göre farklılık gösterebilir:\nDev ve Demo Ortamları: Postman üzerinden doğrudan yapabilirsiniz. Production Ortamı: Projeyi local ortamda çalıştırarak, Postman’den localdeki projeye istek atmanız gerekecek. Not: Herhangi bir ortamda anket yüklerken, işlem zaman aşımına uğrarsa, yükleme işlemi projeyi yerel ortamda çalıştırarak gerçekleştirilmelidir. Detaylar için 4.6 Projeyi Yerel Ortamda Çalıştırma bölümüne bakabilirsiniz.\nAdımlar: 4.1 Postman Koleksiyonunu Hazırlama İlk olarak,Sense.postman_collection Tenant Excel dosyaları dosyalarını bilgisayarınıza indirin. Ardından, Postman koleksiyonunu Postman uygulamasına aktarın. 4.2 Ortam ve Tenant Kodu Seçimi Postman’de Sense üzerine gelin, url kısmından uygun ortamı seçin ve anketleri ekleyeceğiniz tenant kodunu girin. Örneğin:\nVariable Current Value url https://survey-api.dev.senswise.co tenantCode TECH_TEST 4.3 Anket Template Yüklenmesi SCALES TEMPLATE YÜKLENMESİ Skala bilgisi değişen tenantlar için diğer anketilerin tekrar yüklenmesi gerekmektedir.Bu aşamada Tenant ile ilgili Scales template yüklemiz gerekir. Postman Sense\u003eTemplateUploads\u003eSurveyOptionUpload isteğine girin.\nSurveyOptionUpload işlemi için, tenant açma dosyalarındaki Scales.xlsx dosyasını Postman’deki Body alanına ekleyin ve Send butonuna tıklayın. Örneğin:\nKey Value ScaleFile Scales_2024_05_30.xlsx Not: Anketlerin ve bağımlılıklarının yüklenmesinin takibini kolaylaştırmak ve karışıklığı önlemek için nelerin yükleneceği liste halinde yazabilir ve yüklediklerinizi işaretleyebilirsiniz.\n4.4 Survey Template ve Dependent Upload İşlemi Bu aşamada anketimizi ve eğer anketin bağımlı soruları varsa anketin bağımlılığını yükleyeceğiz. Sense\u003eTemplateUploads\u003e SurveyUpload isteğine girin.\nSurveyUpload açtıktan sonra SurveyHeaders alanına yükleyeceğiniz anketin Header dosyasını, Surveys alanına ise anketin Template dosyalarını ekleyin, ardından Send butonuna tıklayın. Geriye dönen Id değeri anketin bağımlılığı varsa sonraki aşamada kullanılacaktır. Örneğin:\nKey Value SurveyHeaders CA_Header_2024_05_30.xlsx Surveys CA_Template_2024_05_30.xlsx Bağımlı Soruların Yüklenmesi Send işleminden sonra dönen SurveyHeaderId kodunu alın. Ardından, Sense\u003eTemplateUploads\u003e surveyDependentQuestion kısmına gelerek, SurveyHeaderId alanına bu kodu girin ve QuestionFile alanına anketin bağımlılığı olan dosyasını ekleyin, ardından Send butonuna tıklayın. Not: Her anketin bağımlı soruları olmayabilir.\nÖrneğin:\nKey Value QuestionFile CA_Dependant_2024_05_30.xlsx SurveyHeaderId 408 4.5 Diğer Survey Template’lerinin ve Dependent Dosyalarının Yüklenmesi Aşağıdaki listede belirtilen diğer anket şablonlarını ve bağımlı dosyalarını yüklemek için yukarıdaki adımları tekrarlayın:\nSurveyUpload kısmına, SurveyHeaders ve Surveys dosyalarını ekleyin ve Send butonuna tıklayın. Daha sonra, bağımlı sorular için surveyDependentQuestion kısmına, SurveyHeaderId kodunu ve ilgili QuestionFile dosyasını ekleyin. Survey SurveyHeader SurveyTemplate DependentQuestion CA CA_Header_2024_05_30.xlsx CA_Template_2024_05_30.xlsx CA_Dependant_2024_05_30.xlsx CA Dependent CA_Dependant_2024_05_30.xlsx N/A N/A DEI DEI_Header_2024_05_30.xlsx DEI_Template_2024_05_30.xlsx DEI_Dependant_2024_05_30.xlsx DEI Dependent DEI_Dependant_2024_05_30.xlsx N/A N/A ENPS ENPS_Header_2024_05_30.xlsx ENPS_Template_2024_05_30.xlsx ENPS_Dependant_2024_05_30.xlsx ENPS Dependant ENPS_Dependant_2024_05_30.xlsx N/A N/A OLX OLX_Header_2024_05_30.xlsx OLX_Template_2024_05_30.xlsx OLX_Dependant_2024_05_30.xlsx OLX Dependant OLX_Dependant_2024_05_30.xlsx N/A N/A RTN RTN_Header_2024_05_30.xlsx RTN_Template_2024_05_30.xlsx RTN_Dependant_2024_05_30.xlsx RTN Dependant RTN_Dependant_2024_05_30.xlsx N/A N/A LCA LCA_Header_2024_05_30.xlsx LCA_Template_2024_05_30.xlsx N/A OHC OHC_Header_2024_05_30.xlsx OHC_Template_2024_05_30.xlsx N/A SC SC_Header_2024_05_30.xlsx SC_Template_2024_05_30.xlsx N/A UPN UPN_Header_2024_05_30.xlsx UPN_Template_2024_05_30.xlsx N/A WB WB_Header_2024_05_30.xlsx WB_Template_2024_05_30.xlsx N/A 4.6 Projeyi Yerel Ortamda Çalıştırma Anketleri yerel ortamda çalıştırılan projeyle yüklemek için Sense.Survey.Api, Sense.API.Gateway ve bazı Docker tabanlı bağımlılıkların çalışması gerekmektedir.\n1. Sense.API.Gateway Projesini Çalıştırma Sense.API.Gateway projesini doğrudan çalıştırabilirsiniz. 2. Sense.Survey.Api Yapılandırması Sense.Survey.Api için sunucuda kullanılan Redis bağlantı dizesi ile yerel ortamda kullanılacak bağlantı adresi farklı olacaktır. Bu nedenle, yerel ortamda Redis bağlantısını kullanabilmek için AppSettings.json dosyasında gerekli güncellemeleri yapın. İlgili bilgiler için Mono Ortam Erişim Bilgilerine göz atabilirsiniz. 3. Docker Servislerini Başlatma Diğer gerekli servisleri yerel ortamınızda başlatmak için Docker Desktop uygulamasını açtıktan sonra docker-compose.yml dosyasını kullanın. docker-compose.yml dosyasının bulunduğu dizinde aşağıdaki komutu terminalde çalıştırarak servisleri başlatabilirsiniz: docker-compose -f docker-compose.yml up 4. Postman Üzerinden İstek Gönderme Projeler başarılı bir şekilde çalışmaya başladıktan sonra, Postman üzerinden isteğinizi Gateway’e gönderebilirsiniz. Bunun için Postman’de Sense üzerine geldikten sonra yapacağınız isteğin Variables alanında current value değerini sunucu yerine localhost:4000 olarak değiştirin. 4.7 Template Bilgilerinin Güncellenmesi Bu aşamada, mevcut Action, Labels ve Insight template bilgilerinde sonradan bir güncelleme yapılması durumunda, bu güncellenen template’lerin nasıl yükleneceği gösterilir. Not: Yeni bir tenant oluşturulduğunda bu template bilgilerini yüklemek zorunlu değildir.\nACTION TEMPLATE YÜKLENMESİ Bazı anketler için Action Template bulunmaktadır. Bu template’i ilgili tenant’a yüklemek için, Postman’de bulunan actionUpload isteğine girin ve body alanında ActionTemplateFile anahtarına ilgili anketin Insight dosyasını yükleyin.\nÖrneğin:\nKey Value ActionTemplateFile SC_Action_Template_2024_05_30.xlsx LABELS TEMPLATE YÜKLENMESİ Labels template dosyasında değişiklik olması durumunda yeni dosya yüklenmelidir. Labels template yüklemek için, Postman’de bulunan uploadMultiLanguageKeyUpload isteğine girin ve body alanında MultilanguageUploadFile anahtarına ilgili Labels dosyasını yükleyin.\nÖrneğin:\nKey Value MultilanguageUploadFile Labels-05-07-2024.xlsx INSIGHT TEMPLATE YÜKLENMESİ Insight template üzerinde bir değişiklik yapıldığında, yeni dosya yüklenmelidir. Bunun için Postman’de bulunan insightUpload isteğini açın ve body alanında, InsightTemplateFile anahtarına değişiklik yapılan Insight template dosyasını yükleyin.\nÖrneğin:\nKey Value InsightTemplateFile LCA_Insight_Template 231215.xlsx 4.8 Son Kontroller Tüm anketler için bu adımları tamamladıktan sonra, sisteme giriş yaparak anketlerin düzgün bir şekilde yüklendiğini kontrol edin. "},"title":"4 - Template Bilgilerinin Yüklenmesi"},"/docs/tenant-creation/tenant-definition/":{"data":{"":"Yeni bir tenant oluşturulurken, bu tenant’a ait bir kod belirlenir. Bu kod en fazla 50 karakter uzunluğunda olabilir.\nBu kod, veritabanındaki SENSWISE veritabanının COR şemasına ait TENANT tablosuna eklenir. Tenant’ı oluşturmak istediğiniz ortamın veritabanına bağlandıktan sonra aşağıdaki SQL sorgusuyla NEW_TENANT kodunu ekleyebilirsiniz:\nINSERT INTO \"COR\".\"TENANT\" (\"CODE\", \"NAME\", \"DEFAULT_LANGUAGE\", \"CREATED_DATE\", \"MODIFIED_DATE\", \"IS_DELETED\", \"USER_TYPE_ID\") VALUES ('NEW_TENANT', 'New Tenant', 'tr-TR', '2024-05-21 00:00:00.000', NULL, false, 4); Not: Tenant kodunun SCREAMING_SNAKE_CASE formatında (yani büyük harflerle ve alt tire ile birleştirilmiş) olması standartlık sağlayacaktır, ancak bu zorunlu değildir.\nDEFAULT_LANGUAGE ve USER_TYPE_ID alanlarının, yeni oluşturulacak tenant için uygun şekilde ayarlanması gerekir.\nDEFAULT_LANGUAGE: Tenant’ın varsayılan dilini belirtir. USER_TYPE_ID: Tenant’ın üyelik tipini belirler. Kullanılabilecek değerler şunlardır: FREE CLASSIC ANALYTICS PRO Örneğin, USER_TYPE_ID değerini 4 olarak belirlersek, bu tenant PRO üyelik tipinde olacaktır."},"title":"1 - Tenant Tanımlanması"}}